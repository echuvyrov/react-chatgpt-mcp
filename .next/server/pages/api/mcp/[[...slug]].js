"use strict";(()=>{var e={};e.id=716,e.ids=[716],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7555:e=>{e.exports=import("@modelcontextprotocol/sdk/server/mcp.js")},677:e=>{e.exports=import("@modelcontextprotocol/sdk/server/streamableHttp.js")},2079:e=>{e.exports=import("openai")},9926:e=>{e.exports=import("zod")},7561:e=>{e.exports=require("node:fs")},9411:e=>{e.exports=require("node:path")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,o){return o in t?t[o]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,o)):"function"==typeof t&&"default"===o?t:void 0}}})},4204:(e,t,o)=>{o.a(e,async(e,n)=>{try{o.r(t),o.d(t,{config:()=>c,default:()=>d,routeModule:()=>p});var r=o(1802),i=o(7153),s=o(6249),l=o(2594),a=e([l]);l=(a.then?(await a)():a)[0];let d=(0,s.l)(l,"default"),c=(0,s.l)(l,"config"),p=new r.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/mcp/[[...slug]]",pathname:"/api/mcp/[[...slug]]",bundlePath:"",filename:""},userland:l});n()}catch(e){n(e)}})},2594:(e,t,o)=>{o.a(e,async(e,n)=>{try{o.r(t),o.d(t,{config:()=>m,default:()=>u});var r=o(7561),i=o(9411),s=o.n(i),l=o(2079),a=o(9926),d=o(7555),c=o(677),p=e([l,a,d,c]);[l,a,d,c]=p.then?(await p)():p;let m={api:{bodyParser:!1}},h=new Set(["POST","GET","DELETE"]),g="ui://widget/hello.html",P=s().join(process.cwd(),"public","widget","index.html");async function u(e,t){if("OPTIONS"===e.method){t.writeHead(204,{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"POST, GET, OPTIONS","Access-Control-Allow-Headers":"content-type, mcp-session-id","Access-Control-Expose-Headers":"Mcp-Session-Id"}),t.end();return}if(!e.method||!h.has(e.method)){t.status(405).send("Method Not Allowed");return}t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Expose-Headers","Mcp-Session-Id");let o=function(){let e=new d.McpServer({name:"hello-world",version:"0.1.0"}),t=(0,r.existsSync)(P)?(0,r.readFileSync)(P,"utf8"):`<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello Widget</title>
  </head>
  <body>
    <div style="padding:24px;font-family:system-ui">Run <code>npm run build:widget</code> to generate the React widget.</div>
  </body>
</html>`;e.registerResource("hello-widget",g,{},async()=>({contents:[{uri:g,mimeType:"text/html+skybridge",text:t,_meta:{"openai/widgetPrefersBorder":!1}}]}));let o=process.env.OPENAI_API_KEY?new l.default({apiKey:process.env.OPENAI_API_KEY}):null;return e.registerTool("show_hello",{title:"Show hello widget",description:"Returns the hello widget and (optionally) a greeting generated by the OpenAI SDK.",inputSchema:a.z.object({use_model:a.z.boolean().optional()}),_meta:{"openai/outputTemplate":g,"openai/toolInvocation/invoking":"Showing Hello World","openai/toolInvocation/invoked":"Hello World ready"}},async e=>{let t="Hello World";if(e?.use_model&&o){let e=process.env.OPENAI_MODEL||"gpt-5",n=await o.responses.create({model:e,input:"Say 'Hello World' as a short greeting."}),r=n.output_text?.trim();r&&(t=r)}return{content:[{type:"text",text:t}],structuredContent:{greeting:t}}}),e}(),n=new c.StreamableHTTPServerTransport({sessionIdGenerator:void 0,enableJsonResponse:!0});t.on("close",()=>{n.close(),o.close()});try{await o.connect(n),await n.handleRequest(e,t)}catch(e){console.error("Error handling MCP request:",e),t.headersSent||t.status(500).send("Internal server error")}}n()}catch(e){n(e)}})},7153:(e,t)=>{var o;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return o}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(o||(o={}))},1802:(e,t,o)=>{e.exports=o(145)}};var t=require("../../../webpack-api-runtime.js");t.C(e);var o=t(t.s=4204);module.exports=o})();